(this.webpackJsonpkotc_ranking=this.webpackJsonpkotc_ranking||[]).push([[0],{254:function(e,t,a){},294:function(e,t,a){},463:function(e,t,a){},595:function(e,t,a){},596:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(68),r=a.n(c),i=a(97),l=(a(362),a(254),a(11)),d=a(46),o=a(29),j=a(12),u=a.n(j),b=a(32),m=a(40);a(364),a(201),a(598);m.a.initializeApp({apiKey:"AIzaSyBHxC9KHBIJunwnJgf9w2-I38y66-SbMJ8",authDomain:"ranking-e77e3.firebaseapp.com",databaseURL:"https://ranking-e77e3.firebaseio.com",projectId:"ranking-e77e3",storageBucket:"ranking-e77e3.appspot.com",messagingSenderId:"198460170843",appId:"1:198460170843:web:bb151c4e352fb386ff957e",measurementId:"G-EZ9XRH78P4"});var h=m.a,O=m.a.auth(),x=m.a.firestore(),p=m.a.storage(),g=a(55),f=a(205),v=a(3),N=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),r=Object(l.a)(c,2),i=r[0],d=r[1],j=Object(n.useState)(""),m=Object(l.a)(j,2),x=m[0],p=m[1],N=Object(o.f)(),w=function(){var e=Object(b.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(a=new h.auth.GoogleAuthProvider),e.next=4,O.signInWithPopup(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?s(n):"password"===a&&d(n)},_=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O.signOut();case 3:return e.prev=3,e.next=6,O.signInWithEmailAndPassword(a,i);case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),p(e.t0.message);case 12:N.push("/");case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"authContainer",children:[Object(v.jsx)(g.a,{icon:f.a,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(v.jsx)("div",{children:" \uad6c\uae00 \ub85c\uadf8\uc778\ub9cc \uac00\ub2a5 \ubc11\uc5d0 Continue with Google \ud074\ub9ad\ud558\uc148"}),Object(v.jsxs)("form",{onSubmit:_,className:"container",children:[Object(v.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:a,onChange:y,className:"authInput"}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,onChange:y,className:"authInput"}),Object(v.jsx)("input",{className:"authInput authSubmit",type:"submit",value:"Log In"}),x&&Object(v.jsx)("span",{className:"authError",children:x})]}),Object(v.jsx)("div",{className:"authBtns",children:Object(v.jsxs)("button",{onClick:w,name:"google",className:"authBtn",children:["Continue with Google ",Object(v.jsx)(g.a,{icon:f.a})]})})]})},w=function(){var e=Object(o.f)();return Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("span",{className:"headerText",children:"KOTC \ub7ad\ud0b9\uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790 \ud398\uc774\uc9c0"}),Object(v.jsx)("i",{class:"fas fa-sign-out-alt fa-2x logout needMargin",onClick:function(){O.signOut(),e.push("/")}})]})},y=a(99),_=a(35),k=a(648),C=a(649),S=a(650),M=function(){var e=Object(n.useState)({name:"",studentid:"",department:"",start_rating:"",rating:"",status:"\uc7ac\ud559"}),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),r=Object(l.a)(c,2),i=r[0],d=r[1],o=a.name,j=a.studentid,m=a.department,h=a.start_rating,O=a.status,g=function(e){var t=e.target,n=t.value,c=t.name;s(Object(_.a)(Object(_.a)({},a),{},Object(y.a)({},c,n)))},f=function(){var e=Object(b.a)(u.a.mark((function e(t){var a,n,c,r,l,b,g,f,v,N,w,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==o){e.next=4;break}return alert("\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 4:if(""!==j){e.next=7;break}return alert("\ud559\ubc88\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 7:if(""!==m){e.next=10;break}return alert("\ud559\uacfc\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 10:if(""!==h){e.next=13;break}return alert("\ucd08\uae30 \ub808\uc774\ud305\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 13:if(""!==O){e.next=16;break}return alert("\uc7ac\ud559\uc0c1\ud0dc\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 16:if(a="",""===i){e.next=25;break}return n=p.ref().child(o),e.next=21,n.putString(i,"data_url");case 21:return c=e.sent,e.next=24,c.ref.getDownloadURL();case 24:a=e.sent;case 25:return r=new Date,l=r.getFullYear(),(b=r.getMonth()+1)<10&&(b="0"+b),(g=r.getDate())<10&&(g="0"+g),(f=r.getHours())<10&&(f="0"+f),(v=r.getMinutes())<10&&(v="0"+v),(N=r.getSeconds())<10&&(N="0"+N),w=l+""+b+g+f+v+N,y={name:o,studentid:parseInt(j),department:m,start_rating:parseInt(h),rating:parseInt(h),status:O,time:w,attachmentUrl:a,game_all:0,game_win:0,game_lose:0},e.next=41,x.collection("user").doc(o).set(y);case 41:d(""),s({name:"",studentid:"",department:"",start_rating:"",rating:"",status:"\uc7ac\ud559"});case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(v.jsx)("div",{className:"userMaker",children:Object(v.jsxs)(k.a,{className:"noteWriter",children:[Object(v.jsxs)("div",{className:"userProfileImage",children:[Object(v.jsx)("span",{children:"\ud504\uc0ac"}),Object(v.jsx)(C.a,{type:"file",name:"file",id:"exampleFile",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;d(t)},a.readAsDataURL(t)}})]}),i&&Object(v.jsxs)("div",{className:"factoryForm__attachment",children:[Object(v.jsx)("img",{className:"profileImg",src:i,alt:"profile image"}),Object(v.jsx)("div",{className:"factoryForm__clear",onClick:function(){return d("")},children:Object(v.jsx)("span",{children:"Remove"})})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\uc774\ub984"}),Object(v.jsx)(C.a,{type:"text",name:"name",onChange:g,value:o})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\ud559\ubc88"}),Object(v.jsx)(C.a,{type:"text",name:"studentid",onChange:g,value:j})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\ud559\uacfc"}),Object(v.jsx)(C.a,{type:"text",name:"department",onChange:g,value:m})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\ucd08\uae30\ub808\uc774\ud305"}),Object(v.jsx)(C.a,{type:"text",name:"start_rating",onChange:g,value:h})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\uc0c1\ud0dc"}),Object(v.jsxs)(C.a,{type:"select",name:"status",onChange:g,value:O,children:[Object(v.jsx)("option",{children:"\uc7ac\ud559"}),Object(v.jsx)("option",{children:"\uc878\uc5c5"})]})]}),Object(v.jsx)(S.a,{className:"needMargin",onClick:f,children:"\uc804\uc1a1"})]})});return Object(v.jsx)("div",{className:"ShortBox",children:N})},I=(a(373),a(374),a(330)),B=a.n(I),F=function(e){var t=e.allUsers,a=m.a.firestore.FieldValue.increment(1),s=Object(n.useState)(""),c=Object(l.a)(s,2),r=c[0],i=c[1],o=Object(n.useState)([]),j=Object(l.a)(o,2),h=j[0],O=j[1],p=Object(n.useState)(""),g=Object(l.a)(p,2),f=g[0],N=g[1],w=Object(n.useState)([]),y=Object(l.a)(w,2),_=y[0],M=y[1],I=Object(n.useState)(""),F=Object(l.a)(I,2),U=F[0],D=F[1],R=Object(n.useState)([]),P=Object(l.a)(R,2),G=P[0],E=P[1],A=Object(n.useState)([]),W=Object(l.a)(A,2),L=W[0],H=W[1],V=Object(n.useState)(new Date),z=Object(l.a)(V,2),K=z[0],T=z[1],Y=Object(n.useState)([]),J=Object(l.a)(Y,2),X=J[0],q=J[1];Object(n.useEffect)((function(){t.map((function(e){q((function(t){return[].concat(Object(d.a)(t),[e.name])}))}))}),[t]);var Z=function(e){if("Enter"===e.key){if(e.preventDefault(),G.length>=2)return alert("2\uba85\uc774\ud558\ub9cc"),void i("");if(X.includes(r)){if(U.includes(r))return alert("\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc720\uc800\uc785\ub2c8\ub2e4"),void i("");E(G.concat(r)),D(U.concat(r)),x.collection("user").where("name","==",r).get().then((function(e){e.forEach((function(e){O(h.concat(e.data().rating))}))})),i("")}else Number.isInteger(parseInt(r))?(E(G.concat(r)),i(""),O(h.concat(Number(r)))):(alert("\ub4f1\ub85d\ub41c \uc720\uc800\uac00 \uc544\ub2d9\ub2c8\ub2e4"),i(""))}else i(e.target.value)},Q=function(e){if("Enter"===e.key){if(e.preventDefault(),L.length>=2)return alert("2\uba85\uc774\ud558\ub9cc"),void N("");if(X.includes(f)){if(U.includes(f))return alert("\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc720\uc800\uc785\ub2c8\ub2e4"),void N("");D(U.concat(f)),H(L.concat(f)),x.collection("user").where("name","==",f).get().then((function(e){e.forEach((function(e){M(_.concat(e.data().rating))}))})),N("")}else Number.isInteger(parseInt(f))?(H(L.concat(f)),N(""),M(_.concat(Number(f)))):(alert("\ub4f1\ub85d\ub41c \uc720\uc800\uac00 \uc544\ub2d9\ub2c8\ub2e4"),N(""))}else N(e.target.value)},$=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,s,c,r,l,d,o,j,b,m,p,g,f,v,w,y,k;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=h[0],s=_[0],2==h.length&&(n=(Math.max(h[0],h[1])+2*Math.min(h[0],h[1]))/3),2==_.length&&(s=(Math.max(_[0],_[1])+2*Math.min(_[0],_[1]))/3),c=(1/(1+Math.pow(10,(s-n)/400))).toFixed(2),r=(1-c).toFixed(2),l=Math.round(32*r),0!==G.length){e.next=11;break}return alert("\uc2b9\uc790\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 11:if(0!==L.length){e.next=14;break}return alert("\ud328\uc790\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 14:if(G.length===L.length){e.next=17;break}return alert("\uc778\uc6d0\uc744 \ub9de\ucd94\uc2dc\uc624"),e.abrupt("return");case 17:if(d=new Date,o=d.getFullYear(),(j=d.getMonth()+1)<10&&(j="0"+j),(b=d.getDate())<10&&(b="0"+b),(m=d.getHours())<10&&(m="0"+m),(p=d.getMinutes())<10&&(p="0"+p),(g=d.getSeconds())<10&&(g="0"+g),f=o+""+j+b+m+p+g,o=K.getFullYear(),(j=K.getMonth()+1)<10&&(j="0"+j),(b=K.getDate())<10&&(b="0"+b),v=o+""+j+b,w=h.map((function(e){return e+l})),y=_.map((function(e){return e-l})),k={winners:G,winnerRatingBefore:h,winnerRatingAfter:w,losers:L,loserRatingBefore:_,loserRatingAfter:y,percentage:Math.round(100*c),ratingChange:l,date:v,write_time:f},NaN!=c){e.next=42;break}return alert("percentage is never NaN"),e.abrupt("return");case 42:return e.next=44,x.collection("game").doc(v+"-"+f).set(k);case 44:return e.next=46,G.map((function(e){x.collection("user").doc(e).collection("game_record").doc(v+"-"+f).set(k),x.collection("user").doc(e).update({rating:h.shift()+l,game_all:a,game_win:a})}));case 46:return e.next=48,L.map((function(e){x.collection("user").doc(e).collection("game_record").doc(v+"-"+f).set(k),x.collection("user").doc(e).update({rating:_.shift()-l,game_all:a,game_lose:a})}));case 48:i(""),N(""),E([]),H([]),D([]),O([]),M([]);case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=Object(v.jsx)("div",{className:"userMaker",children:Object(v.jsxs)(k.a,{className:"noteWriter",children:[Object(v.jsxs)("div",{className:"matchResult",children:[Object(v.jsxs)("span",{children:[Object(v.jsx)("div",{children:"\uc2b9"}),Object(v.jsx)(C.a,{type:"text",name:"win",value:r,onChange:Z,onKeyPress:Z}),Object(v.jsx)("div",{className:"users playerView",children:G.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})}))})]}),Object(v.jsx)("span",{className:"versus",children:" VS "}),Object(v.jsxs)("span",{children:[Object(v.jsx)("div",{children:"\ud328"}),Object(v.jsx)(C.a,{type:"text",name:"lose",value:f,onChange:Q,onKeyPress:Q}),Object(v.jsx)("div",{className:"users",children:Object(v.jsx)("div",{className:"flexWrap",children:L.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})}))})})]})]}),Object(v.jsxs)("div",{className:"datepicker",children:[Object(v.jsx)("span",{className:"needMargin",children:"\uc2dc\ud569\uc77c"}),Object(v.jsx)(B.a,{selected:K,onChange:function(e){return T(e)}})]}),Object(v.jsx)(S.a,{className:"needMargin",onClick:$,children:"\uc804\uc1a1"})]})});return Object(v.jsx)("div",{className:"ShortBox",children:ee})},U=a(660),D=a(651),R=function(e){var t=e.allUsers.map((function(e){return Object(v.jsxs)(U.a,{children:[Object(v.jsx)(D.a,{children:Object(v.jsxs)("div",{className:"spaceBetween",children:[Object(v.jsxs)("div",{children:[e.name,"__"]}),Object(v.jsx)("div",{children:e.status})]})}),Object(v.jsxs)("div",{className:"needMargin spaceBetween",children:[Object(v.jsxs)("div",{children:["\ud559\ubc88 : ",e.studentid]}),Object(v.jsxs)("div",{children:["\ud559\uacfc : ",e.department]})]}),Object(v.jsxs)("div",{className:"needMargin spaceBetween",children:[Object(v.jsxs)("div",{children:["Rating : ",e.rating]}),Object(v.jsxs)("div",{children:["\uc804\uc801 : ",e.game_win,"\uc2b9 ",e.game_lose,"\ud328"]})]})]})}));return Object(v.jsx)("div",{className:"LongBox",children:t})},P=function(e){var t=e.allGame,a=function(){var e=Object(b.a)(u.a.mark((function e(a){var n,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],s=[],c=0,t.map((function(e){e.id==a.target.id&&(n=n.concat(e.winners),s=s.concat(e.losers),c=e.ratingChange)})),e.next=6,n.map((function(e){x.collection("user").doc(e).collection("game_record").doc(a.target.id).delete(),x.collection("user").doc(e).update({rating:m.a.firestore.FieldValue.increment(-c),game_all:m.a.firestore.FieldValue.increment(-1),game_win:m.a.firestore.FieldValue.increment(-1)})}));case 6:return e.next=8,s.map((function(e){x.collection("user").doc(e).collection("game_record").doc(a.target.id).delete(),x.collection("user").doc(e).update({rating:m.a.firestore.FieldValue.increment(c),game_all:m.a.firestore.FieldValue.increment(-1),game_lose:m.a.firestore.FieldValue.increment(-1)})}));case 8:return e.next=10,x.collection("game").doc(a.target.id).delete();case 10:alert(a.target.id+" \ub97c \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=t.map((function(e){return Object(v.jsxs)("div",{className:"displayFlex",children:[Object(v.jsxs)(U.a,{children:[Object(v.jsxs)(D.a,{children:[e.winners.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})})),"vs",e.losers.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})}))]}),Object(v.jsxs)("div",{className:"needMargin flexWrap spaceBetween",children:[Object(v.jsxs)("div",{children:["\ub808\uc774\ud305\ubcc0\ud654 : ",e.ratingChange]}),Object(v.jsxs)("div",{children:["\uc2b9\ub960\uc608\uce21 : ",e.percentage,"%"]})]}),Object(v.jsxs)("div",{className:"needMargin flexWrap spaceBetween",children:["\ub4f1\ub85d\uc2dc\uac01 : ",e.time]})]}),Object(v.jsx)("i",{class:"far fa-trash-alt deleteIcon",id:e.date+"-"+e.time,onClick:a})]})}));return Object(v.jsxs)("div",{className:"LongBox",children:[Object(v.jsxs)("div",{className:"gameListHeader",children:[Object(v.jsx)("span",{children:"\uc2b9\ub9ac\ud300"}),Object(v.jsx)("span",{children:"\ud328\ubc30\ud300"})]}),Object(v.jsx)("div",{children:n})]})},G=(a(463),function(e){var t=e.allUsers,a=e.allGame;return Object(v.jsxs)("div",{className:"AdminMain",children:[Object(v.jsx)(w,{}),Object(v.jsxs)("div",{className:"Content",children:[Object(v.jsx)(M,{}),Object(v.jsx)(F,{allUsers:t}),Object(v.jsx)(R,{allUsers:t}),Object(v.jsx)(P,{allGame:a})]})]})}),E=a(333),A=a(334),W=a.n(A),L=function(e){var t=e.userObj,a=Object(n.useState)(!1),s=Object(l.a)(a,2),c=s[0],r=s[1],i=Object(n.useState)([]),o=Object(l.a)(i,2),j=o[0],m=o[1],p=Object(n.useState)({title:"",content:""}),g=Object(l.a)(p,2),f=g[0],N=g[1];Object(n.useEffect)((function(){m([]),x.collection("post").get().then((function(e){e.docs.map((function(e){var t={title:e.data().title,content:e.data().content,writter:e.data().writter,date:e.data().date,recent_fix:e.data().recent_fix};m((function(e){return[].concat(Object(d.a)(e),[t])}))}))}))}),[]);var w=function(){var e=Object(b.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(a=new h.auth.GoogleAuthProvider),e.next=4,O.signInWithPopup(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(u.a.mark((function e(a){var n,s,i,l,d,o,j,b,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==f.title){e.next=4;break}return alert("\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 4:if(""!==f.content){e.next=7;break}return alert("\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 7:return n=new Date,s=n.getFullYear(),(i=n.getMonth()+1)<10&&(i="0"+i),(l=n.getDate())<10&&(l="0"+l),(d=n.getHours())<10&&(d="0"+d),(o=n.getMinutes())<10&&(o="0"+o),(j=n.getSeconds())<10&&(j="0"+j),m={date:b=s+""+i+l+d+o+j,title:f.title,content:f.content,writer:t.displayName},e.next=23,x.collection("post").doc(b).set(m);case 23:N({title:"",content:""}),r(!c);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){r(!c)},S=j.map((function(e){return Object(v.jsxs)("div",{className:"post",children:[Object(v.jsx)("div",{classNames:"postTitle",children:e.title}),Object(v.jsxs)("div",{classNames:"postDate",children:[e.date.slice(0,4),"\ub144 ",e.date.slice(4,6),"\uc6d4 ",e.date.slice(6,8),"\uc77c"]})]})})),M=Object(v.jsxs)("div",{className:"postMaker",children:[Object(v.jsx)("input",{className:"titleInput",type:"text",placeholder:"\uc81c\ubaa9",onChange:function(e){var t=e.target,a=t.name,n=t.value;N(Object(_.a)(Object(_.a)({},f),{},Object(y.a)({},a,n)))},name:"title"}),Object(v.jsx)(E.CKEditor,{editor:W.a,data:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc6a9!",onChange:function(e,t){var a=t.getData();N(Object(_.a)(Object(_.a)({},f),{},{content:a}))}}),Object(v.jsxs)("div",{className:"buttons",children:[Object(v.jsx)("button",{className:"writeModeBtn",onClick:C,children:"\ucde8\uc18c"}),Object(v.jsx)("button",{className:"writeModeBtn",onClick:k,children:"\uc791\uc131"})]})]});return Object(v.jsx)(v.Fragment,{children:t.displayName?Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"postMain",children:M})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{className:"writeModeBtn",onClick:C,children:"\uc791\uc131"}),Object(v.jsx)("div",{className:"postmain",children:Object(v.jsx)("div",{className:"postList",children:S})})]})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:w,name:"google",className:"writeModeBtn",children:"\uad6c\uae00 \ub85c\uadf8\uc778"}),Object(v.jsx)("div",{className:"postMain",children:S})]})})},H=(a(294),a(62)),V=function(e){var t=e.allUsers,a=(e.allGame,e.contentMode),s=(e.setContentMode,t.filter((function(e){return"\uc7ac\ud559"===e.status}))),c=(t.filter((function(e){return 16===e.studentid})),Object(n.useState)({end:9})),r=Object(l.a)(c,2),i=r[0],d=r[1],o=Object(n.useState)([]),j=Object(l.a)(o,2),u=j[0],b=j[1],m=Object(n.useState)("\uc804\uccb4"),h=Object(l.a)(m,2),O=h[0],x=h[1],p=Object(n.useState)(""),f=Object(l.a)(p,2),N=f[0],w=f[1];Object(n.useEffect)((function(){if("\uc7ac\ud559\uc0dd\ub7ad\ud0b9"===a)b(s.slice(0,i.end));else if("\uc804\uccb4\ub7ad\ud0b9"===a)switch(O){case"\uc804\uccb4":b(t);break;case"\ud559\ubc88":b(N?t.filter((function(e){return e.studentid===parseInt(N)})):t);break;default:b(t)}}),[a,t,i,O,N]);var y=u.map((function(e,t){return Object(v.jsxs)("div",{className:"ranking",children:[Object(v.jsx)("p",{className:"item--left grade",children:t+1}),Object(v.jsx)("div",{className:"item--img",children:e.attachmentUrl?Object(v.jsx)("img",{src:e.attachmentUrl,alt:"profile-img"}):Object(v.jsx)("img",{src:"https://d2u3dcdbebyaiu.cloudfront.net/uploads/atch_img/68/d768b6caa2c0d23507bc12087bf171a8.jpeg",alt:"profile-img"})}),Object(v.jsxs)("div",{className:"item--right",children:[Object(v.jsx)("span",{className:"rating",children:e.rating}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"studentName",children:e.name}),Object(v.jsx)("span",{className:"studentId",children:e.studentid}),Object(v.jsx)("span",{className:"department",children:e.department})]})]})]},t)}));function k(e){var t=e.target.id;x(t)}var C=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"dropdown",children:[Object(v.jsxs)("div",{className:"dropdown--selected",children:[Object(v.jsx)("span",{className:"selected",children:O}),Object(v.jsx)(g.a,{icon:H.a})]}),Object(v.jsxs)("ul",{className:"dropdown--list",children:[Object(v.jsx)("li",{id:"\uc804\uccb4",className:"dropdown--list__item",onClick:k,children:"\uc804\uccb4"}),Object(v.jsx)("li",{id:"\ud559\ubc88",className:"dropdown--list__item",onClick:k,children:"\ud559\ubc88"})]})]}),Object(v.jsx)("input",{type:"text",className:"rankingContent-input",placeholder:"text me...",onChange:function(e){w(e.target.value)}})]});return Object(v.jsxs)(v.Fragment,{children:["\uc804\uccb4\ub7ad\ud0b9"===a&&C,Object(v.jsx)("div",{className:"rankingContainer",onScroll:function(e){var t=e.target;if(t.scrollTop+t.clientHeight>=t.scrollHeight)switch(s.length-i.end){case 0:break;case 1:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+1})}));break;case 2:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+2})}));break;case 3:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+3})}));break;case 4:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+4})}));break;default:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+5})}))}},children:y})]})},z=function(e){var t=e.allGame.slice(0,5).map((function(e,t){return Object(v.jsxs)("div",{className:"game",children:[Object(v.jsxs)("div",{className:"top",children:[e.date.slice(0,4),"\ub144 ",e.date.slice(4,6),"\uc6d4 ",e.date.slice(6),"\uc77c"]}),Object(v.jsx)("div",{className:"bot",children:2===e.winners.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"winner",children:[Object(v.jsx)("span",{children:"Winner! ^^"}),Object(v.jsxs)("div",{className:"winnerInfo",children:[Object(v.jsxs)("div",{className:"winnerNames",children:[Object(v.jsx)("span",{className:"winner__name",children:e.winners[0]}),Object(v.jsx)("span",{className:"winner__name",children:e.winners[1]})]}),Object(v.jsxs)("div",{className:"winnerRatings",children:[Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(g.a,{className:"icon--win",icon:H.b})]}),Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(g.a,{className:"icon--win",icon:H.b})]})]})]})]}),Object(v.jsxs)("div",{className:"loser",children:[Object(v.jsx)("span",{children:"loser! \u3160\u3160"}),Object(v.jsxs)("div",{className:"loserInfo",children:[Object(v.jsxs)("div",{className:"loserNames",children:[Object(v.jsx)("span",{className:"loser__name",children:e.losers[0]}),Object(v.jsx)("span",{className:"loser__name",children:e.losers[1]})]}),Object(v.jsxs)("div",{className:"loserRatings",children:[Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(g.a,{className:"icon--lose",icon:H.a})]}),Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(g.a,{className:"icon--lose",icon:H.a})]})]})]})]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"winner",children:[Object(v.jsx)("span",{children:"Winner! ^^"}),Object(v.jsxs)("div",{className:"winnerInfo",children:[Object(v.jsx)("div",{className:"winnerNames",children:Object(v.jsx)("span",{className:"winner__name",children:e.winners[0]})}),Object(v.jsx)("div",{className:"winnerRatings",children:Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(g.a,{className:"icon--win",icon:H.b})]})})]})]}),Object(v.jsxs)("div",{className:"loser",children:[Object(v.jsx)("span",{children:"loser! \u3160\u3160"}),Object(v.jsxs)("div",{className:"loserInfo",children:[Object(v.jsx)("div",{className:"loserNames",children:Object(v.jsx)("span",{className:"loser__name",children:e.losers[0]})}),Object(v.jsx)("div",{className:"loserRatings",children:Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(g.a,{className:"icon--lose",icon:H.a})]})})]})]})]})})]},t)}));return Object(v.jsx)("div",{className:"games",children:t})},K=a(335),T=function(e){var t=e.allUsers,a=(e.allGame,e.contentMode,Object(d.a)(t));a.sort((function(e,t){return e.time>t.time?-1:e.time<t.time?1:0}));var n=a.map((function(e,t){return Object(v.jsxs)("div",{className:"userInfo",children:[Object(v.jsx)("div",{className:"userProfile",children:Object(v.jsx)("img",{className:"userImage",src:e.attachmentUrl})}),Object(v.jsxs)("div",{className:"userInfoRightSide",children:[Object(v.jsxs)("div",{className:"userInfoUpSide",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"studentName",children:e.name}),Object(v.jsx)("span",{children:" . . . "}),Object(v.jsx)("span",{className:"userStatus",children:e.status})]}),Object(v.jsxs)("div",{className:"win_lose",children:[Object(v.jsxs)("div",{className:"department",children:[e.game_win,"\uc2b9"]}),Object(v.jsxs)("div",{className:"department",children:[e.game_lose,"\ud328"]})]})]}),Object(v.jsxs)("div",{className:"userInfoBottomSide",children:[Object(v.jsxs)("span",{className:"rating",children:["\ub808\uc774\ud305: ",e.rating]}),Object(v.jsx)("span",{className:"studentId",children:e.studentId}),Object(v.jsx)("span",{className:"department",children:e.department})]})]})]},t)}));return Object(v.jsxs)("div",{className:"usersInformation",children:[Object(v.jsx)("div",{className:"chartSample",children:Object(v.jsx)(K.a,{data:[{id:"japan",color:"hsl(314, 70%, 50%)",data:[{x:"plane",y:99},{x:"helicopter",y:142},{x:"boat",y:88},{x:"train",y:100},{x:"subway",y:283},{x:"bus",y:30},{x:"car",y:264},{x:"moto",y:290},{x:"bicycle",y:238},{x:"horse",y:166},{x:"skateboard",y:264},{x:"others",y:287}]},{id:"france",color:"hsl(99, 70%, 50%)",data:[{x:"plane",y:242},{x:"helicopter",y:49},{x:"boat",y:182},{x:"train",y:0},{x:"subway",y:285},{x:"bus",y:218},{x:"car",y:15},{x:"moto",y:2},{x:"bicycle",y:235},{x:"horse",y:72},{x:"skateboard",y:49},{x:"others",y:184}]}],margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"transportation",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"count",legendOffset:-40,legendPosition:"middle"},enableGridX:!1,lineWidth:3,pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-16,isInteractive:!1,enableCrosshair:!1,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:107,translateY:-15,itemsSpacing:2,itemDirection:"left-to-right",itemWidth:88,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, 0.5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})}),Object(v.jsx)("div",{className:"userList",children:n})]})},Y=(a(595),function(e){var t=e.userObj,a=e.allUsers,s=e.allGame,c=Object(n.useState)("\uc7ac\ud559\uc0dd\ub7ad\ud0b9"),r=Object(l.a)(c,2),i=r[0],d=r[1],o=function(e){e.preventDefault(),d(e.target.id)};return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("div",{className:"client-container",children:[Object(v.jsxs)("div",{className:"nav",children:[Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{id:"\uc7ac\ud559\uc0dd\ub7ad\ud0b9",onClick:o,children:"\uc7ac\ud559\uc0dd \ub7ad\ud0b9"}),Object(v.jsx)("li",{id:"\uc804\uccb4\ub7ad\ud0b9",onClick:o,children:"\uc804\uccb4 \ub7ad\ud0b9"}),Object(v.jsx)("li",{id:"\uc120\uc218\uc0c1\uc138\uc815\ubcf4",onClick:o,children:"\uc120\uc218 \uc0c1\uc138\uc815\ubcf4"}),Object(v.jsx)("li",{id:"\uac8c\uc2dc\uae00",onClick:o,children:"\uac8c\uc2dc\uae00"})]}),Object(v.jsxs)("footer",{children:[Object(v.jsx)("p",{className:"footer--top",children:"\xa9 2021, Built by"}),Object(v.jsx)("p",{className:"footer--bot",children:"gilmujjang & Hyeon-Gwang"})]})]}),Object(v.jsxs)("div",{className:"ClientMain",children:[["\uc7ac\ud559\uc0dd\ub7ad\ud0b9","\uc804\uccb4\ub7ad\ud0b9"].includes(i)&&Object(v.jsx)(V,{allGame:s,allUsers:a,contentMode:i,setContentMode:d}),"\uc120\uc218\uc0c1\uc138\uc815\ubcf4"===i&&Object(v.jsx)(T,{allUsers:a}),"\uac8c\uc2dc\uae00"===i&&Object(v.jsx)(L,{userObj:t})]}),!["\uc120\uc218\uc0c1\uc138\uc815\ubcf4","\uac8c\uc2dc\uae00"].includes(i)&&Object(v.jsxs)("div",{className:"aside",children:[Object(v.jsx)("div",{className:"aside1",children:Object(v.jsx)(z,{allGame:s})}),Object(v.jsx)("div",{className:"aside2",children:Object(v.jsx)("h2",{children:"aside2"})})]})]})})}),J=function(e){var t=e.userObj,a=Object(n.useState)([]),s=Object(l.a)(a,2),c=s[0],r=s[1],j=Object(n.useState)([]),u=Object(l.a)(j,2),b=u[0],m=u[1];return Object(n.useEffect)((function(){x.collection("user").orderBy("rating","desc").get().then((function(e){e.docs.map((function(e){var t={name:e.data().name,rating:e.data().rating,game_all:e.data().game_all,game_win:e.data().game_win,game_lose:e.data().game_lose,studentid:e.data().studentid,department:e.data().department,status:e.data().status,time:e.data().time,attachmentUrl:e.data().attachmentUrl};r((function(e){return[].concat(Object(d.a)(e),[t])}))}))}))}),[]),Object(n.useEffect)((function(){x.collection("game").orderBy("write_time","desc").limit(10).get().then((function(e){e.docs.map((function(e){var t={winners:e.data().winners,losers:e.data().losers,ratingChange:e.data().ratingChange,percentage:e.data().percentage,date:e.data().date,time:e.data().write_time,id:e.data().date+"-"+e.data().write_time};m((function(e){return[].concat(Object(d.a)(e),[t])}))}))}))}),[]),Object(v.jsxs)(i.b,{children:[Object(v.jsx)(o.a,{exact:!0,path:"/",children:Object(v.jsx)(Y,{allUsers:c,allGame:b,userObj:t})}),Object(v.jsx)(o.c,{children:t.displayName?Object(v.jsx)(o.a,{path:"/admin",children:Object(v.jsx)(G,{userObj:t,allUsers:c,allGame:b})}):Object(v.jsx)(o.a,{exact:!0,path:"/admin",children:Object(v.jsx)(N,{})})})]})};var X=function(){var e=O.currentUser,t=Object(n.useState)(!1),a=Object(l.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)({displayName:null}),i=Object(l.a)(r,2),d=i[0],o=i[1];return Object(n.useEffect)((function(){O.onAuthStateChanged((function(e){e?o({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}):O.signInAnonymously().catch((function(e){console.log(e.code),console.log(e.message)})),c(!0)}))}),[]),Object(v.jsx)(v.Fragment,{children:s?Object(v.jsx)(J,{refreshUser:function(){o(O.currentUser),o({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(d),userObj:d}):"Initailizing..."})};r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(i.a,{children:Object(v.jsx)(X,{})})}),document.getElementById("root"))}},[[596,1,2]]]);
//# sourceMappingURL=main.7158949a.chunk.js.map