(this.webpackJsonpkotc_ranking=this.webpackJsonpkotc_ranking||[]).push([[0],{114:function(e,t,n){},216:function(e,t,n){},311:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),c=n(40),r=n.n(c),i=n(43),l=(n(140),n(99),n(8)),o=n(30),d=n(18),j=n(10),u=n.n(j),m=n(14),b=n(22);n(142),n(86),n(317);b.a.initializeApp({apiKey:"AIzaSyBHxC9KHBIJunwnJgf9w2-I38y66-SbMJ8",authDomain:"ranking-e77e3.firebaseapp.com",databaseURL:"https://ranking-e77e3.firebaseio.com",projectId:"ranking-e77e3",storageBucket:"ranking-e77e3.appspot.com",messagingSenderId:"198460170843",appId:"1:198460170843:web:bb151c4e352fb386ff957e",measurementId:"G-EZ9XRH78P4"});var h=b.a,O=b.a.auth(),x=b.a.firestore(),f=b.a.storage(),p=n(16),g=n(96),v=n(0),N=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),r=Object(l.a)(c,2),i=r[0],o=r[1],j=Object(a.useState)(""),b=Object(l.a)(j,2),x=b[0],f=b[1],N=Object(d.f)(),w=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(n=new h.auth.GoogleAuthProvider),e.next=4,O.signInWithPopup(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?s(a):"password"===n&&o(a)},_=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O.signOut();case 3:return e.prev=3,e.next=6,O.signInWithEmailAndPassword(n,i);case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),f(e.t0.message);case 12:N.push("/");case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"authContainer",children:[Object(v.jsx)(p.a,{icon:g.a,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(v.jsx)("div",{children:" \uad6c\uae00 \ub85c\uadf8\uc778\ub9cc \uac00\ub2a5 \ubc11\uc5d0 Continue with Google \ud074\ub9ad\ud558\uc148"}),Object(v.jsxs)("form",{onSubmit:_,className:"container",children:[Object(v.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:k,className:"authInput"}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,onChange:k,className:"authInput"}),Object(v.jsx)("input",{className:"authInput authSubmit",type:"submit",value:"Log In"}),x&&Object(v.jsx)("span",{className:"authError",children:x})]}),Object(v.jsx)("div",{className:"authBtns",children:Object(v.jsxs)("button",{onClick:w,name:"google",className:"authBtn",children:["Continue with Google ",Object(v.jsx)(p.a,{icon:g.a})]})})]})},w=function(){var e=Object(d.f)();return Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("span",{className:"headerText",children:"KOTC \ub7ad\ud0b9\uc2dc\uc2a4\ud15c \uad00\ub9ac\uc790 \ud398\uc774\uc9c0"}),Object(v.jsx)("i",{class:"fas fa-sign-out-alt fa-2x logout needMargin",onClick:function(){O.signOut(),e.push("/")}})]})},k=n(62),_=n(25),C=n(318),y=n(319),S=n(320),I=function(){var e=Object(a.useState)({name:"",studentid:"",department:"",start_rating:"",rating:"",status:"\uc7ac\ud559"}),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),r=Object(l.a)(c,2),i=r[0],o=r[1],d=n.name,j=n.studentid,b=n.department,h=n.start_rating,O=n.status,p=function(e){var t=e.target,a=t.value,c=t.name;s(Object(_.a)(Object(_.a)({},n),{},Object(k.a)({},c,a)))},g=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,c,r,l,m,p,g,v,N,w,k;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==d){e.next=4;break}return alert("\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 4:if(""!==j){e.next=7;break}return alert("\ud559\ubc88\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 7:if(""!==b){e.next=10;break}return alert("\ud559\uacfc\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 10:if(""!==h){e.next=13;break}return alert("\ucd08\uae30 \ub808\uc774\ud305\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 13:if(""!==O){e.next=16;break}return alert("\uc7ac\ud559\uc0c1\ud0dc\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 16:if(n="",""===i){e.next=25;break}return a=f.ref().child("userprofile").child(d),e.next=21,a.putString(i,"data_url");case 21:return c=e.sent,e.next=24,c.ref.getDownloadURL();case 24:n=e.sent;case 25:return r=new Date,l=r.getFullYear(),(m=r.getMonth()+1)<10&&(m="0"+m),(p=r.getDate())<10&&(p="0"+p),(g=r.getHours())<10&&(g="0"+g),(v=r.getMinutes())<10&&(v="0"+v),(N=r.getSeconds())<10&&(N="0"+N),w=l+""+m+p+g+v+N,k={name:d,studentid:parseInt(j),department:b,start_rating:parseInt(h),rating:parseInt(h),status:O,time:w,attachmentUrl:n,game_all:0,game_win:0,game_lose:0},e.next=41,x.collection("user").doc(d).set(k);case 41:o(""),s({name:"",studentid:"",department:"",start_rating:"",rating:"",status:"\uc7ac\ud559"});case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(v.jsx)("div",{className:"userMaker",children:Object(v.jsxs)(C.a,{className:"noteWriter",children:[Object(v.jsxs)("div",{className:"userProfileImage",children:[Object(v.jsx)("span",{children:"\ud504\uc0ac"}),Object(v.jsx)(y.a,{type:"file",name:"file",id:"exampleFile",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;o(t)},n.readAsDataURL(t)}})]}),i&&Object(v.jsxs)("div",{className:"factoryForm__attachment",children:[Object(v.jsx)("img",{className:"profileImg",src:i,alt:"profile image"}),Object(v.jsx)("div",{className:"factoryForm__clear",onClick:function(){return o("")},children:Object(v.jsx)("span",{children:"Remove"})})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\uc774\ub984"}),Object(v.jsx)(y.a,{type:"text",name:"name",onChange:p,value:d})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\ud559\ubc88"}),Object(v.jsx)(y.a,{type:"text",name:"studentid",onChange:p,value:j})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\ud559\uacfc"}),Object(v.jsx)(y.a,{type:"text",name:"department",onChange:p,value:b})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\ucd08\uae30\ub808\uc774\ud305"}),Object(v.jsx)(y.a,{type:"text",name:"start_rating",onChange:p,value:h})]}),Object(v.jsxs)("div",{className:"needMargin",children:[Object(v.jsx)("span",{children:"\uc0c1\ud0dc"}),Object(v.jsxs)(y.a,{type:"select",name:"status",onChange:p,value:O,children:[Object(v.jsx)("option",{children:"\uc7ac\ud559"}),Object(v.jsx)("option",{children:"\uc878\uc5c5"})]})]}),Object(v.jsx)(S.a,{className:"needMargin",onClick:g,children:"\uc804\uc1a1"})]})});return Object(v.jsx)("div",{className:"ShortBox",children:N})},M=(n(151),n(152),n(132)),F=n.n(M),U=function(e){var t=e.allUsers,n=b.a.firestore.FieldValue.increment(1),s=Object(a.useState)(""),c=Object(l.a)(s,2),r=c[0],i=c[1],d=Object(a.useState)([]),j=Object(l.a)(d,2),h=j[0],O=j[1],f=Object(a.useState)(""),p=Object(l.a)(f,2),g=p[0],N=p[1],w=Object(a.useState)([]),k=Object(l.a)(w,2),_=k[0],I=k[1],M=Object(a.useState)(""),U=Object(l.a)(M,2),R=U[0],B=U[1],D=Object(a.useState)([]),P=Object(l.a)(D,2),A=P[0],E=P[1],T=Object(a.useState)([]),L=Object(l.a)(T,2),W=L[0],H=L[1],G=Object(a.useState)(new Date),K=Object(l.a)(G,2),V=K[0],J=K[1],Y=Object(a.useState)([]),z=Object(l.a)(Y,2),q=z[0],X=z[1];Object(a.useEffect)((function(){t.map((function(e){X((function(t){return[].concat(Object(o.a)(t),[e.name])}))}))}),[t]);var Z=function(e){if("Enter"===e.key){if(e.preventDefault(),A.length>=2)return alert("2\uba85\uc774\ud558\ub9cc"),void i("");if(q.includes(r)){if(R.includes(r))return alert("\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc720\uc800\uc785\ub2c8\ub2e4"),void i("");E(A.concat(r)),B(R.concat(r)),x.collection("user").where("name","==",r).get().then((function(e){e.forEach((function(e){O(h.concat(e.data().rating))}))})),i("")}else Number.isInteger(parseInt(r))?(E(A.concat(r)),i(""),O(h.concat(Number(r)))):(alert("\ub4f1\ub85d\ub41c \uc720\uc800\uac00 \uc544\ub2d9\ub2c8\ub2e4"),i(""))}else i(e.target.value)},Q=function(e){if("Enter"===e.key){if(e.preventDefault(),W.length>=2)return alert("2\uba85\uc774\ud558\ub9cc"),void N("");if(q.includes(g)){if(R.includes(g))return alert("\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc720\uc800\uc785\ub2c8\ub2e4"),void N("");B(R.concat(g)),H(W.concat(g)),x.collection("user").where("name","==",g).get().then((function(e){e.forEach((function(e){I(_.concat(e.data().rating))}))})),N("")}else Number.isInteger(parseInt(g))?(H(W.concat(g)),N(""),I(_.concat(Number(g)))):(alert("\ub4f1\ub85d\ub41c \uc720\uc800\uac00 \uc544\ub2d9\ub2c8\ub2e4"),N(""))}else N(e.target.value)},$=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,s,c,r,l,o,d,j,m,b,f,p,g,v,w,k,C;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=h[0],s=_[0],2==h.length&&(a=(Math.max(h[0],h[1])+2*Math.min(h[0],h[1]))/3),2==_.length&&(s=(Math.max(_[0],_[1])+2*Math.min(_[0],_[1]))/3),c=(1/(1+Math.pow(10,(s-a)/400))).toFixed(2),r=(1-c).toFixed(2),l=0,l=2==h.length?Math.round(16*r):Math.round(32*r),0!==A.length){e.next=12;break}return alert("\uc2b9\uc790\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 12:if(0!==W.length){e.next=15;break}return alert("\ud328\uc790\ub97c \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 15:if(A.length===W.length){e.next=18;break}return alert("\uc778\uc6d0\uc744 \ub9de\ucd94\uc2dc\uc624"),e.abrupt("return");case 18:if(o=new Date,d=o.getFullYear(),(j=o.getMonth()+1)<10&&(j="0"+j),(m=o.getDate())<10&&(m="0"+m),(b=o.getHours())<10&&(b="0"+b),(f=o.getMinutes())<10&&(f="0"+f),(p=o.getSeconds())<10&&(p="0"+p),g=d+""+j+m+b+f+p,d=V.getFullYear(),(j=V.getMonth()+1)<10&&(j="0"+j),(m=V.getDate())<10&&(m="0"+m),v=d+""+j+m,w=h.map((function(e){return e+l})),k=_.map((function(e){return e-l})),C={winners:A,winnerRatingBefore:h,winnerRatingAfter:w,losers:W,loserRatingBefore:_,loserRatingAfter:k,percentage:Math.round(100*c),ratingChange:l,date:v,write_time:g},NaN!=c){e.next=43;break}return alert("percentage is never NaN"),e.abrupt("return");case 43:return e.next=45,x.collection("game").doc(v+"-"+g).set(C);case 45:return e.next=47,A.map((function(e){x.collection("user").doc(e).collection("game_record").doc(v+"-"+g).set(C),x.collection("user").doc(e).update({rating:h.shift()+l,game_all:n,game_win:n})}));case 47:return e.next=49,W.map((function(e){x.collection("user").doc(e).collection("game_record").doc(v+"-"+g).set(C),x.collection("user").doc(e).update({rating:_.shift()-l,game_all:n,game_lose:n})}));case 49:i(""),N(""),E([]),H([]),B([]),O([]),I([]);case 50:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=Object(v.jsx)("div",{className:"userMaker",children:Object(v.jsxs)(C.a,{className:"noteWriter",children:[Object(v.jsxs)("div",{className:"matchResult",children:[Object(v.jsxs)("span",{children:[Object(v.jsx)("div",{children:"\uc2b9"}),Object(v.jsx)(y.a,{type:"text",name:"win",value:r,onChange:Z,onKeyPress:Z}),Object(v.jsx)("div",{className:"users playerView",children:A.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})}))})]}),Object(v.jsx)("span",{className:"versus",children:" VS "}),Object(v.jsxs)("span",{children:[Object(v.jsx)("div",{children:"\ud328"}),Object(v.jsx)(y.a,{type:"text",name:"lose",value:g,onChange:Q,onKeyPress:Q}),Object(v.jsx)("div",{className:"users",children:Object(v.jsx)("div",{className:"flexWrap",children:W.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})}))})})]})]}),Object(v.jsxs)("div",{className:"datepicker",children:[Object(v.jsx)("span",{className:"needMargin",children:"\uc2dc\ud569\uc77c"}),Object(v.jsx)(F.a,{selected:V,onChange:function(e){return J(e)}})]}),Object(v.jsx)(S.a,{className:"needMargin",onClick:$,children:"\uc804\uc1a1"})]})});return Object(v.jsx)("div",{className:"ShortBox",children:ee})},R=n(322),B=n(321),D=function(e){var t=e.allUsers.map((function(e){return Object(v.jsxs)(R.a,{children:[Object(v.jsx)(B.a,{children:Object(v.jsxs)("div",{className:"spaceBetween",children:[Object(v.jsxs)("div",{children:[e.name,"__"]}),Object(v.jsx)("div",{children:e.status})]})}),Object(v.jsxs)("div",{className:"needMargin spaceBetween",children:[Object(v.jsxs)("div",{children:["\ud559\ubc88 : ",e.studentid]}),Object(v.jsxs)("div",{children:["\ud559\uacfc : ",e.department]})]}),Object(v.jsxs)("div",{className:"needMargin spaceBetween",children:[Object(v.jsxs)("div",{children:["Rating : ",e.rating]}),Object(v.jsxs)("div",{children:["\uc804\uc801 : ",e.game_win,"\uc2b9 ",e.game_lose,"\ud328"]})]})]})}));return Object(v.jsx)("div",{className:"LongBox",children:t})},P=function(e){var t=e.allGame,n=function(){var e=Object(m.a)(u.a.mark((function e(n){var a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],s=[],c=0,t.map((function(e){e.id==n.target.id&&(a=a.concat(e.winners),s=s.concat(e.losers),c=e.ratingChange)})),e.next=6,a.map((function(e){x.collection("user").doc(e).collection("game_record").doc(n.target.id).delete(),x.collection("user").doc(e).update({rating:b.a.firestore.FieldValue.increment(-c),game_all:b.a.firestore.FieldValue.increment(-1),game_win:b.a.firestore.FieldValue.increment(-1)})}));case 6:return e.next=8,s.map((function(e){x.collection("user").doc(e).collection("game_record").doc(n.target.id).delete(),x.collection("user").doc(e).update({rating:b.a.firestore.FieldValue.increment(c),game_all:b.a.firestore.FieldValue.increment(-1),game_lose:b.a.firestore.FieldValue.increment(-1)})}));case 8:return e.next=10,x.collection("game").doc(n.target.id).delete();case 10:alert(n.target.id+" \ub97c \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=t.map((function(e){return Object(v.jsxs)("div",{className:"displayFlex",children:[Object(v.jsxs)(R.a,{children:[Object(v.jsxs)(B.a,{children:[e.winners.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})})),"vs",e.losers.map((function(e){return Object(v.jsx)("span",{className:"targetUser",children:e})}))]}),Object(v.jsxs)("div",{className:"needMargin flexWrap spaceBetween",children:[Object(v.jsxs)("div",{children:["\ub808\uc774\ud305\ubcc0\ud654 : ",e.ratingChange]}),Object(v.jsxs)("div",{children:["\uc2b9\ub960\uc608\uce21 : ",e.percentage,"%"]})]}),Object(v.jsxs)("div",{className:"needMargin flexWrap spaceBetween",children:["\ub4f1\ub85d\uc2dc\uac01 : ",e.time]})]}),Object(v.jsx)("i",{class:"far fa-trash-alt deleteIcon",id:e.date+"-"+e.time,onClick:n})]})}));return Object(v.jsxs)("div",{className:"LongBox",children:[Object(v.jsxs)("div",{className:"gameListHeader",children:[Object(v.jsx)("span",{children:"\uc2b9\ub9ac\ud300"}),Object(v.jsx)("span",{children:"\ud328\ubc30\ud300"})]}),Object(v.jsx)("div",{children:a})]})},A=(n(216),function(e){var t=e.allUsers,n=e.allGame;return Object(v.jsxs)("div",{className:"AdminMain",children:[Object(v.jsx)(w,{}),Object(v.jsxs)("div",{className:"Content",children:[Object(v.jsx)(I,{}),Object(v.jsx)(U,{allUsers:t}),Object(v.jsx)(D,{allUsers:t}),Object(v.jsx)(P,{allGame:n})]})]})}),E=function(e){var t=e.userObj,n=Object(a.useState)(!1),s=Object(l.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(!1),d=Object(l.a)(i,2),j=d[0],p=d[1],g=Object(a.useState)([]),N=Object(l.a)(g,2),w=N[0],k=N[1],_=Object(a.useState)(""),C=Object(l.a)(_,2),y=C[0],S=C[1],I=Object(a.useState)(""),M=Object(l.a)(I,2),F=M[0],U=M[1],R=Object(a.useState)(""),B=Object(l.a)(R,2),D=B[0],P=B[1],A=Object(a.useState)([]),E=Object(l.a)(A,2),T=E[0],L=E[1],W=Object(a.useState)(!1),H=Object(l.a)(W,2),G=H[0],K=H[1],V=Object(a.useState)([]),J=Object(l.a)(V,2),Y=J[0],z=J[1],q=Object(a.useState)(0),X=Object(l.a)(q,2),Z=X[0],Q=X[1];b.a.firestore.FieldValue.increment(1);Object(a.useEffect)((function(){k([]),x.collection("post").orderBy("date","desc").limit(10).get().then((function(e){e.docs.map(function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,s,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[],s=0,c=[],e.next=6,x.collection("post").doc(t.data().date).collection("likes").get().then((function(e){e.docs.map((function(e){s+=1,n.push(e.data().name),a.push(e.data().userid)}))}));case 6:return r=0,e.next=9,x.collection("post").doc(t.data().date).collection("comments").get().then((function(e){e.docs.map((function(e){r+=1;var t={writerid:e.data().writerid,writername:e.data().writername,text:e.data().text,writedate:e.data().writedate,recentfix:e.data().recentfix,writerphoto:e.data().writerphoto,commentfixmode:!1};c.unshift(t)}))}));case 9:i={content:t.data().content,writername:t.data().writername,writerid:t.data().writerid,writerprofile:t.data().writerprofile,date:t.data().date,recent_fix:t.data().recent_fix,imagelist:t.data().imageurl,likenum:s,likelistname:n,likelistuserid:a,commentsnum:r,commentslist:c,commentshow:!1,moremenushow:!1},k((function(e){return[].concat(Object(o.a)(e),[i])}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[j]);var $=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(n=new h.auth.GoogleAuthProvider),e.next=4,O.signInWithPopup(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ee(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0"+n);var a=e.getDate();a<10&&(a="0"+a);var s=e.getHours();s<10&&(s="0"+s);var c=e.getMinutes();c<10&&(c="0"+c);var r=e.getSeconds();return r<10&&(r="0"+r),t+""+n+a+s+c+r}var te=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==D){e.next=4;break}return alert("\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 4:if(D!==n.comment.text){e.next=6;break}return e.abrupt("return");case 6:return a=ee(),console.log(n.post.date),console.log(n.comment.writedate),e.next=11,x.collection("post").doc(n.post.date).collection("comments").doc(n.comment.writedate).update({text:D,recentfix:a});case 11:s=w.map((function(e){return e.date==n.post.date&&e.commentslist.map((function(e){return e.writedate==n.comment.writedate&&(e.commentfixmode=!e.commentfixmode,e.text=D),e})),e})),k(s),P("");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(m.a)(u.a.mark((function e(n,a){var s,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==F){e.next=4;break}return alert("\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 4:return s=ee(),c={text:F,writedate:s,recentfix:s,writername:t.displayName,writerid:t.uid,writerphoto:t.photoUrl},e.next=8,x.collection("post").doc(a.post.date).collection("comments").doc(s).set(c);case 8:U(""),r=w.map((function(e){if(e.date==a.post.date){var t=e.commentslist;t.unshift(c),e.commentslist=t}return e})),k(r);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(m.a)(u.a.mark((function e(n,a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x.collection("post").doc(a.post.date).collection("likes").doc(t.uid).delete();case 3:s=w.map((function(e){if(e.date==a.post.date){var n=e.likelistname,s=e.likelistuserid,c=n.filter((function(e){return e!==t.displayName})),r=s.filter((function(e){return e!==t.uid}));e.likenum=e.likenum-1,e.likelistname=c,e.likelistuserid=r}return e})),k(s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(m.a)(u.a.mark((function e(n,a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s={name:t.displayName,userid:t.uid,time:ee()},e.next=4,x.collection("post").doc(a.post.date).collection("likes").doc(t.uid).set(s);case 4:c=w.map((function(e){if(e.date==a.post.date){var n=e.likelistname,s=e.likelistuserid;n.push(t.displayName),s.push(t.uid),e.likenum=e.likenum+1,e.likelistname=n,e.likelistuserid=s}return e})),k(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(m.a)(u.a.mark((function e(n){var a,s,i,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(){return(l=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,n=T.map(function(){var e=Object(m.a)(u.a.mark((function e(n){var s,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,f.ref().child("post/").child(a).child(String(t));case 3:return s=e.sent,e.next=6,s.putString(n,"data_url");case 6:return c=e.sent,e.next=9,c.ref.getDownloadURL();case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(n);case 4:e.sent.forEach((function(e){return s.push(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(){return l.apply(this,arguments)},n.preventDefault(),""!==y){e.next=6;break}return alert("\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694"),e.abrupt("return");case 6:return a=ee(),s=[],e.next=10,i();case 10:return o={date:a,recent_fix:a,content:y,writername:t.displayName,writerid:t.uid,writerprofile:t.photoUrl,imageurl:s},e.next=13,x.collection("post").doc(a).set(o);case 13:S(""),r(!c),p(!j),L([]);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){r(!c)},ie=function(e){e.preventDefault(),U(e.target.value)},le=function(e){e.preventDefault(),P(e.target.value)},oe=function(e,t){z(t.post),Q(parseInt(e.target.id)),K(!0)},de=function(e,t){e.preventDefault();var n=w.map((function(e){return e.date==t.post.date&&(e.commentshow=!e.commentshow),e}));k(n)},je=function(e){return Object(v.jsx)("img",{id:"0",onClick:function(t){oe(t,{post:e})},src:e[0],className:"imageOne"})},ue=function(e){return Object(v.jsxs)("div",{className:"postImages",children:[Object(v.jsx)("div",{onClick:function(t){oe(t,{post:e})},children:Object(v.jsx)("img",{id:"0",onClick:function(t){oe(t,{post:e})},src:e[0],className:"imageTwo"})}),Object(v.jsx)("div",{onClick:function(t){oe(t,{post:e})},children:Object(v.jsx)("img",{id:"1",onClick:function(t){oe(t,{post:e})},src:e[1],className:"imageTwo"})})]})},me=function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{onClick:function(t){oe(t,{post:e})},children:Object(v.jsx)("img",{id:"0",src:e[0],className:"imageThreeBig"})}),Object(v.jsxs)("div",{onClick:function(t){oe(t,{post:e})},children:[Object(v.jsx)("img",{id:"1",src:e[1],className:"imageThreeSmall"}),Object(v.jsx)("img",{id:"2",src:e[2],className:"imageThreeSmall"})]})]})},be=function(e){return Object(v.jsxs)("div",{className:"postImages",children:[Object(v.jsx)("div",{onClick:function(t){oe(t,{post:e})},className:"imageFour",children:Object(v.jsx)("img",{id:"0",onClick:function(t){oe(t,{post:e})},src:e[0],className:"fullimage"})}),Object(v.jsx)("div",{onClick:function(t){oe(t,{post:e})},className:"imageFour",children:Object(v.jsx)("img",{id:"1",onClick:function(t){oe(t,{post:e})},src:e[1],className:"fullimage"})}),Object(v.jsx)("div",{onClick:function(t){oe(t,{post:e})},className:"imageFour",children:Object(v.jsx)("img",{id:"2",onClick:function(t){oe(t,{post:e})},src:e[2],className:"fullimage"})}),Object(v.jsx)("div",{onClick:function(t){oe(t,{post:e})},className:"imageFour",children:Object(v.jsx)("img",{id:"3",onClick:function(t){oe(t,{post:e})},src:e[3],className:"fullimage"})})]})},he=function(e){return Object(v.jsxs)("div",{className:"postImages",children:[Object(v.jsx)("div",{className:"imageFour",post:e,onClick:function(t){oe(t,{post:e})},children:Object(v.jsx)("img",{id:"0",src:e[0],className:"fullimage"})}),Object(v.jsx)("div",{className:"imageFour",post:e,onClick:function(t){oe(t,{post:e})},children:Object(v.jsx)("img",{id:"1",src:e[1],className:"fullimage"})}),Object(v.jsx)("div",{className:"imageFour",post:e,onClick:function(t){oe(t,{post:e})},children:Object(v.jsx)("img",{id:"2",src:e[2],className:"fullimage"})}),Object(v.jsxs)("div",{className:"imageFour",post:e,onClick:function(t){oe(t,{post:e})},children:[Object(v.jsx)("div",{className:"moreimages",id:"3"}),Object(v.jsx)("div",{className:"showmoreimages",id:"3",children:"\ub354\ubcf4\uae30+"}),Object(v.jsx)("img",{id:"3",src:e[3],className:"fullimage"})]})]})},Oe=Object(v.jsxs)("div",{className:"modal",children:[Object(v.jsx)("span",{className:"close",onClick:function(){z([]),Q(""),K(!1)},children:"\xd7"}),0!=Z&&Object(v.jsx)("span",{className:"left",onClick:function(){Q(Z-1)},children:"<"}),Y.length-1!==Z&&Object(v.jsx)("span",{className:"right",onClick:function(){Q(Z+1)},children:">"}),Object(v.jsx)("img",{className:"modal-content",src:Y[Z]})]}),xe=function(){var e=Object(m.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n.post);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(m.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u3139\u3147 \uc9c0\uc6c0?")){e.next=4;break}return e.next=3,x.collection("post").doc(n.post.date).delete();case 3:p(!j);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(m.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u3139\u3147 \uc9c0\uc6c0?")){e.next=4;break}return e.next=3,x.collection("post").doc(n.post.date).collection("comments").doc(n.comment.writedate).delete();case 3:p(!j);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=w.map((function(e){return e.date==n.post.date&&e.commentslist.map((function(e){return e.writedate==n.comment.writedate&&(e.commentfixmode=!e.commentfixmode),e})),e})),k(a),P(n.comment.text);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=w.map((function(e){return Object(v.jsxs)("div",{className:"post",children:[e.writerid==t.uid&&Object(v.jsxs)("div",{className:"moremenu",onClick:function(t){!function(e,t){var n=w.map((function(e){return e.date==t.post.date&&(e.moremenushow=!e.moremenushow),e}));k(n)}(0,{post:e})},children:[Object(v.jsx)("i",{className:"moremenuicon fas fa-ellipsis-h"}),Object(v.jsxs)("div",{className:e.moremenushow?"moremenuactive":"moremenuicons",children:[Object(v.jsx)("div",{className:"postfix",onClick:function(t){xe(t,{post:e})},children:"\uc218\uc815"}),Object(v.jsx)("div",{className:"postdelete",onClick:function(t){fe(t,{post:e})},children:"\uc0ad\uc81c"})]})]}),Object(v.jsxs)("div",{className:"postHeader",children:[Object(v.jsx)("div",{className:"postHeaderLeft",children:Object(v.jsx)("img",{className:"userProfile",src:e.writerprofile})}),Object(v.jsxs)("div",{className:"postHeaderRight",children:[Object(v.jsx)("div",{classNames:"userName",children:e.writername}),Object(v.jsxs)("div",{classNames:"postDate",children:[e.date.slice(0,4),"\ub144 ",e.date.slice(4,6),"\uc6d4 ",e.date.slice(6,8),"\uc77c"]})]})]}),Object(v.jsxs)("div",{className:"postContent",children:[Object(v.jsx)("div",{className:"postText",children:e.content}),Object(v.jsxs)("div",{className:"postImage",children:[1==e.imagelist.length&&je(e.imagelist),2==e.imagelist.length&&ue(e.imagelist),3==e.imagelist.length&&me(e.imagelist),4==e.imagelist.length&&be(e.imagelist),e.imagelist.length>4&&he(e.imagelist)]})]}),Object(v.jsxs)("div",{className:"heartandcomment",children:[Object(v.jsxs)("div",{className:"getheart",children:[Object(v.jsx)("i",{className:"hearticon fas fa-heart"}),e.likenum,Object(v.jsx)("div",{className:"likelistshow",children:e.likelistname.map((function(e){return Object(v.jsx)("div",{classNames:"likeuser",children:e})}))})]}),Object(v.jsxs)("div",{onClick:function(t){de(t,{post:e})},className:"getcomment",children:[Object(v.jsx)("i",{class:"commenticon fas fa-comment"}),e.commentsnum]})]}),Object(v.jsxs)("div",{className:"postFooter",children:[e.likelistuserid.includes(t.uid)?Object(v.jsxs)("div",{className:"postLike",children:[Object(v.jsx)("i",{className:"heart fas fa-heart",onClick:function(t){ae(t,{post:e})}}),"\uc88b\uc544\uc694"]}):Object(v.jsxs)("div",{className:"postLike",children:[Object(v.jsx)("i",{className:"heart far fa-heart",onClick:function(t){se(t,{post:e})}}),"\uc88b\uc544\uc694"]}),Object(v.jsxs)("div",{onClick:function(t){de(t,{post:e})},className:"postComment",children:[Object(v.jsx)("i",{class:"commenticon fas fa-comment-dots"}),"\ub313\uae00 \uc4f0\uae30"]})]}),e.commentshow&&Object(v.jsxs)("div",{className:"commentsBox",children:[Object(v.jsxs)("div",{className:"commentmaker",children:[Object(v.jsx)("img",{class:"commentUserProfile",src:t.photoUrl}),Object(v.jsx)("input",{className:"commentwrite",onChange:ie,value:F,placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud574\ubcf4\uc138\uc6a9"}),F?Object(v.jsx)("button",{className:"commentsubmitbtn",onClick:function(t){ne(t,{post:e})},children:Object(v.jsx)("p",{children:"\ubcf4\ub0b4\uae30"})}):Object(v.jsx)("div",{className:"btnunactive",children:Object(v.jsx)("p",{children:"\ubcf4\ub0b4\uae30"})})]}),e.commentslist.map((function(n){return Object(v.jsxs)("div",{className:"comments",children:[n.writerid==t.uid&&Object(v.jsxs)("div",{className:"commentmoremenu",children:[Object(v.jsx)("i",{className:"moremenuicon fas fa-ellipsis-h"}),Object(v.jsxs)("div",{className:"commentmoremenuactive",children:[Object(v.jsx)("div",{className:"commentfix",onClick:function(t){ge(t,{post:e,comment:n})},children:"\uc218\uc815"}),Object(v.jsx)("div",{className:"commentdelete",onClick:function(t){pe(t,{post:e,comment:n})},children:"\uc0ad\uc81c"})]})]}),Object(v.jsx)("div",{className:"commentuserprofile",children:Object(v.jsx)("img",{className:"commentUserProfile",src:n.writerphoto,alt:"\ud504\uc0ac"})}),Object(v.jsxs)("div",{className:"commentmain",children:[Object(v.jsx)("div",{className:"commentwriter",children:n.writername}),n.commentfixmode?Object(v.jsxs)("div",{className:"commentfixmain",children:[Object(v.jsx)("input",{className:"commentwrite",onChange:le,value:D}),Object(v.jsx)("button",{className:"commentsubmitbtn",onClick:function(t){te(t,{post:e,comment:n})},children:Object(v.jsx)("p",{children:"\uc218\uc815"})})]}):Object(v.jsx)("div",{children:n.text}),Object(v.jsxs)("div",{className:"commentwritedate",children:[n.writedate.slice(0,4),"\ub144 ",n.writedate.slice(4,6),"\uc6d4 ",n.writedate.slice(6,8),"\uc77c"]})]})]})}))]})]})})),Ne=Object(v.jsxs)("div",{className:c?"postMaker active":"postMaker",children:[Object(v.jsx)("div",{className:"postMakeHeader",children:" \uac8c\uc2dc\ubb3c \ub9cc\ub4e4\uae30 "}),Object(v.jsx)("textarea",{className:"makePost",onChange:function(e){e.preventDefault(),S(e.target.value)},value:y,placeholder:"\ubc18\uac11\uc2b5\ub2c8\ub2e4 ".concat(t.displayName,"\ub2d8!")}),Object(v.jsxs)("div",{className:"file",children:[Object(v.jsxs)("div",{className:"fileHeader",children:[Object(v.jsx)("input",{type:"file",id:"fileInput",className:"fileInput",multiple:!0,onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;L(T.concat(t))},n.readAsDataURL(t)}}),Object(v.jsxs)("label",{htmlFor:"fileInput",children:[Object(v.jsx)("span",{children:"\uc774\ubbf8\uc9c0 \ucd94\uac00\ud558\uae30"}),Object(v.jsx)("i",{class:"fas fa-images fa-2x"})]})]}),T.length<6&&T.map((function(e){return Object(v.jsx)("img",{className:"images",src:e,alt:"photo"})})),T.length>=6&&T.map((function(e){return Object(v.jsx)("img",{className:"images",src:e,alt:"photo"})}))]}),Object(v.jsxs)("div",{className:"buttons",children:[Object(v.jsx)("button",{className:"writeModeBtn",onClick:re,children:"\ucde8\uc18c"}),Object(v.jsx)("button",{className:"writeModeBtn",onClick:ce,children:"\uc791\uc131"})]})]}),we=Object(v.jsxs)("div",{className:"postMakeBtn",children:[Object(v.jsxs)("div",{children:[t.displayName," \ub2d8 \uc548\ub155\ud558\uc138\uc694!"]}),Object(v.jsx)("button",{className:"writeModeBtn",onClick:re,children:"\uc791\uc131"})]}),ke=Object(v.jsx)("button",{onClick:$,name:"google",className:"writeModeBtn",children:"\uad6c\uae00 \ub85c\uadf8\uc778"});return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"postMain",children:[G&&Oe,Ne,Object(v.jsxs)("div",{className:c?"postList active":"postList",children:[t.displayName?Object(v.jsx)(v.Fragment,{children:we}):Object(v.jsx)(v.Fragment,{children:ke}),ve]})]})})},T=(n(114),n(15)),L=function(e){var t=e.allUsers,n=e.contentMode,s=t.filter((function(e){return"\uc7ac\ud559"===e.status||"\uc878\uc5c5"===e.status})),c=t.filter((function(e){return"\uc7ac\ud559"===e.status})),r=Object(a.useState)({end:9}),i=Object(l.a)(r,2),o=i[0],d=i[1],j=Object(a.useState)([]),u=Object(l.a)(j,2),m=u[0],b=u[1],h=Object(a.useState)("\uc804\uccb4"),O=Object(l.a)(h,2),x=O[0],f=O[1],g=Object(a.useState)(""),N=Object(l.a)(g,2),w=N[0],k=N[1];Object(a.useEffect)((function(){if("\uc7ac\ud559\uc0dd\ub7ad\ud0b9"===n)b(c.slice(0,o.end));else if("\uc804\uccb4\ub7ad\ud0b9"===n)switch(x){case"\uc804\uccb4":b(s);break;case"\ud559\ubc88":b(w?s.filter((function(e){return e.studentid===parseInt(w)})):s);break;default:b(s)}}),[n,t,o,x,w]);var C=m.map((function(e,t){return Object(v.jsxs)("div",{className:"ranking",children:[Object(v.jsx)("p",{className:"item--left grade",children:t+1}),Object(v.jsx)("div",{className:"item--img",children:e.attachmentUrl?Object(v.jsx)("img",{src:e.attachmentUrl,alt:"profile-img"}):Object(v.jsx)("img",{src:"https://d2u3dcdbebyaiu.cloudfront.net/uploads/atch_img/68/d768b6caa2c0d23507bc12087bf171a8.jpeg",alt:"profile-img"})}),Object(v.jsxs)("div",{className:"item--right",children:[Object(v.jsx)("span",{className:"rating",children:e.rating}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"studentName",children:e.name}),Object(v.jsx)("span",{className:"studentId",children:e.studentid}),Object(v.jsx)("span",{className:"department",children:e.department})]})]})]},t)}));function y(e){f(e.target.id)}var S=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"dropdown dropdown--rankingContainer",children:[Object(v.jsxs)("div",{className:"dropdown--selected",children:[Object(v.jsx)("span",{className:"selected",children:x}),Object(v.jsx)(p.a,{icon:T.a})]}),Object(v.jsxs)("ul",{className:"dropdown--list",children:[Object(v.jsx)("li",{id:"\uc804\uccb4",className:"dropdown--list__item",onClick:y,children:"\uc804\uccb4"}),Object(v.jsx)("li",{id:"\ud559\ubc88",className:"dropdown--list__item",onClick:y,children:"\ud559\ubc88"})]})]}),Object(v.jsx)("input",{type:"text",className:"filter--rangkingContent",placeholder:"text me...",onChange:function(e){k(e.target.value)}})]});return Object(v.jsxs)(v.Fragment,{children:["\uc804\uccb4\ub7ad\ud0b9"===n&&S,Object(v.jsx)("div",{className:"rankingContainer",onScroll:function(e){var t=e.target;if(t.scrollTop+t.clientHeight>=t.scrollHeight)switch(c.length-o.end){case 0:break;case 1:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+1})}));break;case 2:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+2})}));break;case 3:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+3})}));break;case 4:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+4})}));break;default:d((function(e){return Object(_.a)(Object(_.a)({},e),{},{end:e.end+5})}))}},children:C})]})},W=function(e){var t=e.allGame.slice(0,5).map((function(e,t){return Object(v.jsxs)("div",{className:"game",children:[Object(v.jsxs)("div",{className:"top",children:[e.date.slice(0,4),"\ub144 ",e.date.slice(4,6),"\uc6d4 ",e.date.slice(6),"\uc77c"]}),Object(v.jsx)("div",{className:"bot",children:2===e.winners.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"winner",children:[Object(v.jsx)("span",{children:"Winner! ^^"}),Object(v.jsxs)("div",{className:"winnerInfo",children:[Object(v.jsxs)("div",{className:"winnerNames",children:[Object(v.jsx)("span",{className:"winner__name",children:e.winners[0]}),Object(v.jsx)("span",{className:"winner__name",children:e.winners[1]})]}),Object(v.jsxs)("div",{className:"winnerRatings",children:[Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--win",icon:T.b})]}),Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--win",icon:T.b})]})]})]})]}),Object(v.jsxs)("div",{className:"loser",children:[Object(v.jsx)("span",{children:"loser! \u3160\u3160"}),Object(v.jsxs)("div",{className:"loserInfo",children:[Object(v.jsxs)("div",{className:"loserNames",children:[Object(v.jsx)("span",{className:"loser__name",children:e.losers[0]}),Object(v.jsx)("span",{className:"loser__name",children:e.losers[1]})]}),Object(v.jsxs)("div",{className:"loserRatings",children:[Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--lose",icon:T.a})]}),Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--lose",icon:T.a})]})]})]})]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"winner",children:[Object(v.jsx)("span",{children:"Winner! ^^"}),Object(v.jsxs)("div",{className:"winnerInfo",children:[Object(v.jsx)("div",{className:"winnerNames",children:Object(v.jsx)("span",{className:"winner__name",children:e.winners[0]})}),Object(v.jsx)("div",{className:"winnerRatings",children:Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--win",icon:T.b})]})})]})]}),Object(v.jsxs)("div",{className:"loser",children:[Object(v.jsx)("span",{children:"loser! \u3160\u3160"}),Object(v.jsxs)("div",{className:"loserInfo",children:[Object(v.jsx)("div",{className:"loserNames",children:Object(v.jsx)("span",{className:"loser__name",children:e.losers[0]})}),Object(v.jsx)("div",{className:"loserRatings",children:Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--lose",icon:T.a})]})})]})]})]})})]},t)}));return Object(v.jsx)("div",{className:"games",children:t})},H=n(135),G=function(e){var t=e.chartMode,n=e.period,a=e.userName,s=e.allUsersByTime,c=e.userKey,r=e.userMatch;function i(e){var t=r.find((function(t){return t.date-e<=0}))?r.find((function(t){return t.date-e<=0})):s[c].start_rating;return"number"===typeof t||"string"===typeof t?Number(t):t.winners.includes(a)?t.winnerRatingAfter[t.winners.indexOf(a)]:t.losers.includes(a)?t.loserRatingAfter[t.losers.indexOf(a)]:void 0}function l(e){var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return n=n>=10?n:"0".concat(n),a=a>=10?a:"0".concat(a),"".concat(t).concat(n).concat(a)}function o(e){return"".concat(e.slice(4,6),"\uc6d4 ").concat(e.slice(6),"\uc77c")}function d(){return l(new Date)}function j(e){var t=new Date,n=t.getDate();return t.setDate(n-e),l(t)}var u=function(e){for(var t=[],n=0;n<e;n++)t.push(o(j(e-n)));return t.push(o(d())),t},m=function(e){for(var t=[],n=0;n<e;n++)t.push(i(j(e-n)));return t.push(i(d())),t};return Object(v.jsx)(H.Line,{data:{labels:function(){switch(n){case"10":case"30":case"60":return u(n)}}(),datasets:[{label:"Rating",data:function(){if("rating"===t)switch(n){case"10":case"30":case"60":return m(n)}else n}(),fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1}]},options:{maintainAspectRatio:!1}})},K=function(e){var t=e.userMatch,n=t.map((function(e,t){return Object(v.jsxs)("div",{className:"game",children:[Object(v.jsxs)("div",{className:"top",children:[e.date.slice(0,4),"\ub144 ",e.date.slice(4,6),"\uc6d4 ",e.date.slice(6),"\uc77c"]}),Object(v.jsx)("div",{className:"bot",children:2===e.winners.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"winner",children:[Object(v.jsx)("span",{children:"Winner! ^^"}),Object(v.jsxs)("div",{className:"winnerInfo",children:[Object(v.jsxs)("div",{className:"winnerNames",children:[Object(v.jsx)("span",{className:"winner__name",children:e.winners[0]}),Object(v.jsx)("span",{className:"winner__name",children:e.winners[1]})]}),Object(v.jsxs)("div",{className:"winnerRatings",children:[Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--win",icon:T.b})]}),Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--win",icon:T.b})]})]})]})]}),Object(v.jsxs)("div",{className:"loser",children:[Object(v.jsx)("span",{children:"loser! \u3160\u3160"}),Object(v.jsxs)("div",{className:"loserInfo",children:[Object(v.jsxs)("div",{className:"loserNames",children:[Object(v.jsx)("span",{className:"loser__name",children:e.losers[0]}),Object(v.jsx)("span",{className:"loser__name",children:e.losers[1]})]}),Object(v.jsxs)("div",{className:"loserRatings",children:[Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--lose",icon:T.a})]}),Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--lose",icon:T.a})]})]})]})]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"winner",children:[Object(v.jsx)("span",{children:"Winner! ^^"}),Object(v.jsxs)("div",{className:"winnerInfo",children:[Object(v.jsx)("div",{className:"winnerNames",children:Object(v.jsx)("span",{className:"winner__name",children:e.winners[0]})}),Object(v.jsx)("div",{className:"winnerRatings",children:Object(v.jsxs)("span",{className:"winner__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--win",icon:T.b})]})})]})]}),Object(v.jsxs)("div",{className:"loser",children:[Object(v.jsx)("span",{children:"loser! \u3160\u3160"}),Object(v.jsxs)("div",{className:"loserInfo",children:[Object(v.jsx)("div",{className:"loserNames",children:Object(v.jsx)("span",{className:"loser__name",children:e.losers[0]})}),Object(v.jsx)("div",{className:"loserRatings",children:Object(v.jsxs)("span",{className:"loser__rating>",children:[e.ratingChange,Object(v.jsx)(p.a,{className:"icon--lose",icon:T.a})]})})]})]})]})})]},t)})),a=Object(v.jsx)("div",{className:"noGame",children:Object(v.jsx)("span",{children:"\uacbd\uae30 \uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})});return Object(v.jsx)(v.Fragment,{children:t.length>0?Object(v.jsx)("div",{className:"games",children:n}):a})},V=function(e){var t=e.allUsersByTime,n=e.userKey,s=Object(a.useRef)();function c(e){return e*(Math.PI/180)}function r(){return t[n].game_win/t[n].game_all}return Object(a.useEffect)((function(){var e=s.current.getContext("2d");!function(e,t,n,a,s,c,r){e.beginPath(),e.lineWidth=4,e.strokeStyle="#7f8c8d",e.arc(t,n,a,s,c,r),e.stroke()}(e,90,90,40,0,2*Math.PI,!1),function(e,t,n,a,s,c,r){e.beginPath(),e.lineWidth=40,e.strokeStyle="#2EC4B6",e.arc(t,n,a,s,c,r),e.stroke()}(e,90,90,66,c(270),c(270-360*r()),!0),function(e,t,n,a,s,c,r){e.beginPath(),e.lineWidth=40,e.strokeStyle="#e74c3c",e.arc(t,n,a,s,c,r),e.stroke()}(e,90,90,66,c(270),c(270-360*r()),!1)}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("canvas",{width:"180",height:"180",ref:s,className:"canvas"}),Object(v.jsx)("span",{className:"hover",children:"Hover me!"}),Object(v.jsxs)("div",{className:"gameRecord",children:[Object(v.jsxs)("span",{className:"record--left",children:[t[n].game_win," \uc2b9"]}),Object(v.jsxs)("span",{className:"record--right",children:[t[n].game_lose," \ud328"]})]})]})},J=function(e){var t=e.allUsersByTime,n=e.userKey,s=Object(a.useRef)();function c(e){return e*(Math.PI/180)}function r(){var e=t.concat().sort((function(e,t){return t.rating-e.rating})),a=e.filter((function(e){return e.name===t[n].name}));return(e.indexOf(a[0])+1)/t.length}var i=function(){return(100*r()).toFixed(2)};return console.log(i()),Object(a.useEffect)((function(){var e=s.current.getContext("2d");!function(e,t,n,a,s,c,r){e.beginPath(),e.lineWidth=4,e.strokeStyle="#7f8c8d",e.arc(t,n,a,s,c,r),e.stroke()}(e,90,90,40,0,2*Math.PI,!1),function(e,t,n,a,s,c,r){e.beginPath(),e.lineWidth=40,e.strokeStyle="#2EC4B6",e.arc(t,n,a,s,c,r),e.stroke()}(e,90,90,66,c(270),c(270-360*(1-r())),!0),function(e,t,n,a,s,c,r){e.beginPath(),e.lineWidth=40,e.strokeStyle="#e74c3c",e.arc(t,n,a,s,c,r),e.stroke()}(e,90,90,66,c(270),c(270-360*(1-r())),!1)}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("canvas",{width:"180",height:"180",ref:s,className:"canvas"}),Object(v.jsx)("span",{className:"hover",children:"Hover me!"}),Object(v.jsxs)("div",{className:"gameRecord",children:[Object(v.jsx)("span",{className:"record--left",children:"\uc0c1\uc704"}),Object(v.jsxs)("span",{className:"record--right",children:[i()," %"]})]})]})},Y=function(e){var t=e.allUsersByTime,n=e.setIsDetailOn,s=e.userKey,c=Object(a.useState)("rating"),r=Object(l.a)(c,2),i=r[0],d=r[1],j=Object(a.useState)("30"),u=Object(l.a)(j,2),m=u[0],b=u[1],h=Object(a.useState)([]),O=Object(l.a)(h,2),f=O[0],g=O[1],N=t[s].name;f.sort((function(e,t){return t.date-e.date}));var w=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"detail--profile",children:Object(v.jsx)("img",{src:t[s].attachmentUrl,alt:"detail profile"})}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"detail__name",children:t[s].name}),Object(v.jsxs)("span",{className:"detail__department",children:[t[s].department,"\uacfc"]}),Object(v.jsxs)("span",{className:"detail__status",children:[t[s].studentid,"\ud559\ubc88 / ",t[s].status]})]})]});function k(e){b(e.target.dataset.period)}function _(e){d(e.target.dataset.mode)}var C=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"button button--userDetail",onClick:k,"data-period":"10",children:"10\uc77c"}),Object(v.jsx)("div",{className:"button button--userDetail",onClick:k,"data-period":"30",children:"30\uc77c"}),Object(v.jsx)("div",{className:"button button--userDetail",onClick:k,"data-period":"60",children:"60\uc77c"})]}),y=Object(v.jsxs)("div",{className:"dropdown dropdown--userDetail",children:[Object(v.jsxs)("div",{className:"dropdown--selected",children:[Object(v.jsx)("span",{className:"selected",children:"rating"===i?"\uc810\uc218":"\uc21c\uc704"}),Object(v.jsx)(p.a,{icon:T.a})]}),Object(v.jsxs)("ul",{className:"dropdown--list",children:[Object(v.jsx)("li",{className:"dropdown--list__item",onClick:_,"data-mode":"rating",children:"\uc810\uc218"}),Object(v.jsx)("li",{className:"dropdown--list__item",onClick:_,"data-mode":"ranking",children:"\uc21c\uc704"})]})]});return Object(a.useEffect)((function(){x.collection("user").doc(t[s].name).collection("game_record").get().then((function(e){e.forEach((function(e){var t={date:e.data().date,loserRatingAfter:e.data().loserRatingAfter,losers:e.data().losers,ratingChange:e.data().ratingChange,winnerRatingAfter:e.data().winnerRatingAfter,winners:e.data().winners};g((function(e){return[].concat(Object(o.a)(e),[t])}))}))}))}),[t,s]),Object(v.jsxs)("div",{className:"detailContainer",children:[Object(v.jsxs)("div",{className:"top",children:[Object(v.jsx)("div",{className:"top--left",children:w}),Object(v.jsx)("div",{className:"top--circleRate winningRate",children:Object(v.jsx)(V,{allUsersByTime:t,userKey:s})}),Object(v.jsx)("div",{className:"top--circleRate rankingRate",children:Object(v.jsx)(J,{allUsersByTime:t,userKey:s})})]}),Object(v.jsxs)("div",{className:"bottom",children:[Object(v.jsxs)("div",{className:"bottom--left",children:[C,y,Object(v.jsx)(G,{chartMode:i,period:m,userName:N,allUsersByTime:t,userKey:s,userMatch:f})]}),Object(v.jsx)("div",{className:"bottom--right",children:Object(v.jsx)(K,{userMatch:f})})]}),Object(v.jsx)(p.a,{icon:T.c,className:"close",onClick:function(){n(!1)}})]})},z=function(e){var t=e.allUsers,n=Object(o.a)(t);n.sort((function(e,t){return e.time>t.time?-1:e.time<t.time?1:0}));var s=Object(a.useState)([]),c=Object(l.a)(s,2),r=c[0],i=c[1],d=Object(a.useState)(!1),j=Object(l.a)(d,2),u=j[0],m=j[1],b=Object(a.useState)(""),h=Object(l.a)(b,2),O=h[0],x=h[1],f=Object(a.useState)(0),p=Object(l.a)(f,2),g=p[0],N=p[1];function w(e){m(!0),N(e.target.dataset.num)}var k=r.map((function(e,t){return Object(v.jsxs)("div",{className:"userInfo",children:[Object(v.jsx)("div",{children:Object(v.jsx)("img",{className:"userImage",src:e.attachmentUrl,onClick:w,"data-num":t,alt:"profile--detail"})}),Object(v.jsxs)("div",{className:"userInfoRightSide",children:[Object(v.jsxs)("div",{className:"userInfoUpSide",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"studentName",children:e.name}),Object(v.jsx)("span",{className:"userStatus",children:e.status})]}),Object(v.jsxs)("div",{className:"win_lose",children:[Object(v.jsxs)("div",{className:"department",children:[e.game_win,"\uc2b9"]}),Object(v.jsxs)("div",{className:"department",children:[e.game_lose,"\ud328"]})]})]}),Object(v.jsxs)("div",{className:"userInfoBottomSide",children:[Object(v.jsxs)("span",{className:"rating",children:["\ub808\uc774\ud305: ",e.rating]}),Object(v.jsx)("span",{className:"department",children:e.department})]})]})]},t)}));return Object(a.useEffect)((function(){i(O?n.filter((function(e){return e.name===O})):n.sort((function(e,t){return e.time>t.time?-1:e.time<t.time?1:0})))}),[O]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("input",{type:"text",className:"filter--info",placeholder:"text name...",onChange:function(e){x(e.target.value)}}),Object(v.jsxs)("div",{className:"usersInformation",children:[Object(v.jsx)("div",{className:"userList",children:k}),u&&Object(v.jsx)(Y,{setIsDetailOn:m,allUsersByTime:n,userKey:g})]})]})},q=(n(311),function(e){var t=e.userObj,n=e.allUsers,s=e.allGame,c=Object(a.useState)("\uc7ac\ud559\uc0dd\ub7ad\ud0b9"),r=Object(l.a)(c,2),i=r[0],o=r[1],d=function(e){e.preventDefault(),o(e.target.id)};return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("div",{className:"client-container",children:[Object(v.jsxs)("div",{className:"nav",children:[Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{id:"\uc7ac\ud559\uc0dd\ub7ad\ud0b9",onClick:d,children:"\uc7ac\ud559\uc0dd \ub7ad\ud0b9"}),Object(v.jsx)("li",{id:"\uc804\uccb4\ub7ad\ud0b9",onClick:d,children:"\uc804\uccb4 \ub7ad\ud0b9"}),Object(v.jsx)("li",{id:"\uc120\uc218\uc0c1\uc138\uc815\ubcf4",onClick:d,children:"\uc120\uc218 \uc0c1\uc138\uc815\ubcf4"}),Object(v.jsx)("li",{id:"\uac8c\uc2dc\uae00",onClick:d,children:"\uac8c\uc2dc\uae00"})]}),Object(v.jsxs)("footer",{children:[Object(v.jsx)("p",{className:"footer--top",children:"\xa9 2021, Built by"}),Object(v.jsx)("p",{className:"footer--bot",children:"gilmujjang & Hyeon-Gwang"})]})]}),Object(v.jsxs)("div",{className:"ClientMain",children:[["\uc7ac\ud559\uc0dd\ub7ad\ud0b9","\uc804\uccb4\ub7ad\ud0b9"].includes(i)&&Object(v.jsx)(L,{allGame:s,allUsers:n,contentMode:i,setContentMode:o}),"\uc120\uc218\uc0c1\uc138\uc815\ubcf4"===i&&Object(v.jsx)(z,{allUsers:n}),"\uac8c\uc2dc\uae00"===i&&Object(v.jsx)(E,{userObj:t})]}),!["\uc120\uc218\uc0c1\uc138\uc815\ubcf4","\uac8c\uc2dc\uae00"].includes(i)&&Object(v.jsxs)("div",{className:"aside",children:[Object(v.jsx)("div",{className:"aside1",children:Object(v.jsx)(W,{allGame:s})}),Object(v.jsx)("div",{className:"aside2",children:Object(v.jsx)("h2",{children:"aside2"})})]})]})})}),X=function(e){var t=e.userObj,n=Object(a.useState)([]),s=Object(l.a)(n,2),c=s[0],r=s[1],j=Object(a.useState)([]),u=Object(l.a)(j,2),m=u[0],b=u[1];return Object(a.useEffect)((function(){x.collection("user").orderBy("rating","desc").get().then((function(e){e.docs.map((function(e){var t={name:e.data().name,rating:e.data().rating,start_rating:e.data().start_rating,game_all:e.data().game_all,game_win:e.data().game_win,game_lose:e.data().game_lose,studentid:e.data().studentid,department:e.data().department,status:e.data().status,time:e.data().time,attachmentUrl:e.data().attachmentUrl};r((function(e){return[].concat(Object(o.a)(e),[t])}))}))}))}),[]),Object(a.useEffect)((function(){x.collection("game").orderBy("write_time","desc").limit(10).get().then((function(e){e.docs.map((function(e){var t={winners:e.data().winners,losers:e.data().losers,ratingChange:e.data().ratingChange,percentage:e.data().percentage,date:e.data().date,time:e.data().write_time,id:e.data().date+"-"+e.data().write_time,winnerRatingAfter:e.data().winnerRatingAfter,loserRatingAfter:e.data().loserRatingAfter};b((function(e){return[].concat(Object(o.a)(e),[t])}))}))}))}),[]),Object(v.jsxs)(i.b,{children:[Object(v.jsx)(d.a,{exact:!0,path:"/",children:Object(v.jsx)(q,{allUsers:c,allGame:m,userObj:t})}),Object(v.jsx)(d.c,{children:t.displayName?Object(v.jsx)(d.a,{path:"/admin",children:Object(v.jsx)(A,{userObj:t,allUsers:c,allGame:m})}):Object(v.jsx)(d.a,{exact:!0,path:"/admin",children:Object(v.jsx)(N,{})})})]})};var Z=function(){var e=O.currentUser,t=Object(a.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)({displayName:null}),i=Object(l.a)(r,2),o=i[0],d=i[1];return Object(a.useEffect)((function(){O.onAuthStateChanged((function(e){e?d({displayName:e.displayName,uid:e.uid,photoUrl:e.photoURL}):O.signInAnonymously().catch((function(e){console.log(e.code),console.log(e.message)})),c(!0)}))}),[]),Object(v.jsx)(v.Fragment,{children:s?Object(v.jsx)(X,{refreshUser:function(){d(O.currentUser),d({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(o),userObj:o}):"Initailizing..."})};r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(i.a,{children:Object(v.jsx)(Z,{})})}),document.getElementById("root"))},99:function(e,t,n){}},[[312,1,2]]]);
//# sourceMappingURL=main.6ac7d384.chunk.js.map